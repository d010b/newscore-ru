Инструкция по управлению и настройке темы NewsCore

Оглавление

1. Основная информация о теме
2. Установка и активация
3. Настройки темы через кастомайзер
4. Настройки главной страницы
5. Управление блоками NewsGrid и NewsSlider
6. Роскомнадзор и юридические требования
7. Интеграция с российскими сервисами
8. SEO оптимизация
9. Виджеты
10. Производительность и безопасность
11. Разработчикам
12. Устранение неполадок

---

1. Основная информация о теме

NewsCore - профессиональная WordPress тема для новостных порталов с фокусом на российский рынок.

Ключевые особенности:

· Полная адаптация под требования Роскомнадзора
· Интеграция с российскими сервисами (без Яндекс сервисов)
· Оптимизирована для SEO
· Высокая скорость загрузки
· Полная адаптивность (mobile-first подход)
· Доступность (ARIA, WCAG)

Версия: 2.0.1
Требования:WordPress 5.0+, PHP 7.4+

---

2. Установка и активация

Автоматическая установка:

1. В админ-панели перейдите: Внешний вид → Темы → Добавить новую
2. Нажмите "Загрузить тему"
3. Выберите ZIP-архив темы
4. Нажмите "Установить"
5. Активируйте тему

Ручная установка через FTP:

1. Распакуйте архив темы
2. Загрузите папку newscore в /wp-content/themes/
3. Активируйте тему в админ-панели

Первоначальная настройка:

```bash
# Создайте необходимые директории
mkdir -p wp-content/uploads/newscore
chmod 755 wp-content/uploads/newscore
```

---

3. Настройки темы через кастомайзер

Доступ: Внешний вид → Настроить

3.1 Общие настройки

· Показывать хлебные крошки - включить/выключить навигацию
· Логотип - загрузка кастомного логотипа
· Favicon - иконка сайта

3.2 Заголовок

· Показывать срочные новости - бегущая строка на главной
· Текст срочных новостей - кастомный текст для лейбла
· Реклама в хедере - через виджет "Реклама в хедере"

3.3 Цветовая схема

· Основной цвет (#0073aa) - цвет ссылок, кнопок
· Акцентный цвет (#f05a28) - цвет выделения, ховеров
· Цвет текста (#333) - основной цвет текста

3.4 Социальные сети

Добавьте URL профилей для отображения иконок в футере:

· Facebook, Twitter, Instagram, YouTube
· Telegram, VKontakte

3.5 Футер

· Текст копирайта - кастомный текст в футере
· Показывать кнопку "Наверх" - включить/выключить
· Виджеты футера - 4 колонки для виджетов

---

4. Настройки главной страницы

4.1 Структура главной:

1. Новостной слайдер (NewsSlider)
2. Главная новость (выделенная)
3. Сетка новостей по категориям (NewsGrid)
4. Последние новости

4.2 Создание главной страницы:

1. Создайте новую страницу "Главная"
2. Выберите шаблон "Front Page"
3. В настройках чтения укажите "Главная страница → Статическая страница"
4. Выберите созданную страницу как главную

4.3 Управление контентом главной:

Для выделения новостей в слайдере:

· Добавьте тег "featured" к записи
· Или установите кастомное поле _featured_post = 1

Для срочных новостей:

· Установите кастомное поле _breaking_news = 1

---

5. Управление блоками NewsGrid и NewsSlider

5.1 NewsGrid - Сетка новостей по категориям

Настройки через кастомайзер:

· Количество категорий - сколько категорий показывать (по умолчанию: 3)
· Количество постов на категорию (по умолчанию: 4)
· Исключить категории - ID категорий через запятую

Особенности отображения:

· Первый пост в категории отображается крупно
· Остальные посты - списком с маленькими картинками
· Автоматическое определение количества постов в категории
· Ссылка "View all" если постов больше настроенного количества

Кастомизация через фильтры:

```php
// Изменить количество категорий
add_filter('newscore_categories_count', function() { return 4; });

// Изменить количество постов
add_filter('newscore_posts_per_category', function() { return 6; });
```

5.2 NewsSlider - Новостной слайдер

Настройки через кастомайзер:

Тип контента:

· Featured - посты с тегом "featured" (рекомендуется)
· Sticky - прикрепленные посты
· Category - посты из выбранной категории
· Recent - последние посты
· Custom - по кастомному полю _slider_post

Параметры отображения:

· Количество слайдов (по умолчанию: 5)
· Автопрокрутка - включить/выключить
· Скорость автопрокрутки (мс, по умолчанию: 5000)
· Анимация - fade/slide
· Категория - для типа "category"
· Тег - дополнительный фильтр

Особенности:

· Только посты с изображениями
· Адаптивная высота (550px десктоп, 350px мобильный)
· Индикаторы прогресса
· Управление с клавиатуры
· Свайпы для мобильных

---

6. Роскомнадзор и юридические требования

6.1 Обязательные элементы:

1. Cookie уведомление

Настройки:

· Включить/выключить в кастомайзере
· Настроить текст и заголовок
· Указать страницу политики конфиденциальности

Функционал:

· Запись согласия пользователя
· Отключение аналитики при отказе
· Настройка отдельных типов cookies

2. Возрастное ограничение

· Автоматическая проверка возраста
· Ограничение контента 18+
· Отслеживание подтверждений

3. Согласие на обработку данных

· Обязательное согласие в формах комментариев
· Запись в базу данных
· Экспорт данных пользователя (GDPR/ФЗ-152)

6.2 Настройки Роскомнадзора в кастомайзере:

1. Показывать уведомление о cookies
2. Заголовок и текст уведомления
3. Страница политики конфиденциальности
4. Информация о СМИ (если есть):
   · Свидетельство о регистрации
   · Главный редактор
   · Контакты редакции

6.3 Юридические виджеты:

Виджет "Юридическая информация"

Размещение: Футер (сайдбар "footer-legal")
Настройки:

· Заголовок
· Дополнительный текст
· Ссылки на: политику конфиденциальности, пользовательское соглашение, использование cookies
· Информация об авторских правах

Виджет "Контакты редакции"

Настройки через кастомайзер:

· Главный редактор
· Email редакции
· Телефон редакции
· Адрес редакции
· Время работы

---

7. Интеграция с российскими сервисами

7.1 Безопасная интеграция (без Яндекс):

Российские социальные сети:

· VK - кнопки "Поделиться", комментарии (требуется App ID)
· Telegram - кнопка "Поделиться"
· Одноклассники - виджет группы
· Mail.ru - кнопка "Поделиться"

Погода и курсы валют:

· Виджет погоды - через OpenWeatherMap (требуется API ключ)
· Курсы валют - данные ЦБ РФ в реальном времени
· Геолокация - определение региона пользователя

7.2 Виджеты российских сервисов:

Яндекс.Погода виджет (альтернативный):

Настройки:

· Укажите город
· Получите API ключ OpenWeatherMap
· Добавьте ключ в настройки темы

Курсы валют виджет:

· Автоматическое обновление с сайта ЦБ РФ
· Кэширование на 1 час
· Ручное обновление

VK Группа виджет:

Настройки:

· ID группы VK (цифровой)
· Режим отображения (участники/записи/обсуждения)
· Размеры и цвета виджета

7.3 Кнопки "Поделиться":

Отображаются автоматически:

· В конце каждой статьи
· Поддерживаются: VK, Одноклассники, Telegram, Mail.ru
· С открытием в новом окне
· Безопасная реализация

---

8. SEO оптимизация

8.1 Автоматические метатеги:

Open Graph:

· Заголовок, описание, изображение
· Тип контента (статья/сайт)
· Локализация (ru_RU)

Twitter Cards:

· Summary with large image
· Автоматическая подстановка изображений

Микроразметка Schema.org:

· NewsArticle для статей
· Organization для сайта
· BreadcrumbList для навигации
· Person для авторов

8.2 Геотаргетинг:

```html
<meta name="geo.region" content="RU-MOW">
<meta name="geo.placename" content="Москва">
<meta name="geo.position" content="55.7558;37.6173">
<meta name="ICBM" content="55.7558, 37.6173">
```

8.3 Оптимизация для Рунета:

· Удалены эмодзи-скрипты
· Отключены ненужные встроенные скрипты WordPress
· Ленивая загрузка изображений
· Оптимизированные шрифты (Roboto, PT Serif)

8.4 Хлебные крошки:

· Автоматическая генерация
· Schema.org разметка
· Настройка отображения в кастомайзере

---

9. Виджеты

9.1 Доступные виджеты:

Основные:

1. Стандартные WordPress (поиск, архив, категории)
2. Последние новости - с миниатюрами
3. Популярные статьи - по просмотрам

Российские:

1. Погода - с реальными данными
2. Курсы валют - ЦБ РФ
3. VK Группа - виджет сообщества
4. Контакты редакции - для СМИ
5. Юридическая информация - требования Роскомнадзора

9.2 Области виджетов:

1. Основной сайдбар (sidebar-1) - для страниц блога
2. Сайдбар новостей (sidebar-2) - для новостных страниц
3. Виджеты (погода и курсы) (russian-widgets) - специализированный
4. Социальные виджеты (social-widgets) - VK, Telegram
5. Футер 1-4 (footer-1 ... footer-4) - 4 колонки
6. Реклама в хедере (header-ad) - для рекламного блока
7. Юридическая информация (footer-legal) - специально для юридических виджетов

9.3 Настройка виджетов:

Погода виджет:

```
Заголовок: Погода
Город: Москва
API ключ: [получить на openweathermap.org]
```

Курсы валют:

```
Заголовок: Курсы валют
Автоматическое обновление: каждые 1 час
Источник: ЦБ РФ
```

VK виджет:

```
Заголовок: Мы ВКонтакте
ID группы: 12345678
Режим: Последние записи
Ширина: auto
Высота: 400
```

---

10. Производительность и безопасность

10.1 Оптимизация скорости:

CSS:

· Минифицированные стили
· Критический CSS в head
· Отложенная загрузка остального
· Кастомные свойства (CSS Variables)

JavaScript:

· Минифицированные скрипты
· Асинхронная загрузка
· Ленивая загрузка изображений
· Оптимизация для мобильных

Изображения:

· Responsive images (srcset)
· Ленивая загрузка
· WebP поддержка (через плагин)
· Оптимизированные размеры

10.2 Безопасность:

Заголовки безопасности:

```php
X-Frame-Options: SAMEORIGIN
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Referrer-Policy: strict-origin-when-cross-origin
```

Защита от атак:

· Валидация всех входных данных
· Экранирование выходных данных
· Nonce проверки для AJAX
· Отключение XML-RPC
· Скрытие версии WordPress

Безопасность данных:

· Хэширование пользовательских согласий
· SSL-обязательные cookies
· Защита от SQL-инъекций
· Валидация email и URL

10.3 Кэширование:

· Транзиенты для API запросов
· Локальное кэширование в браузере
· Оптимизированные запросы к БД
· Минимизация HTTP запросов

---

11. Разработчикам

11.1 Структура темы:

```
newscore/
├── assets/
│   ├── css/
│   │   ├── main.css          # Основные стили
│   │   ├── responsive.css    # Адаптивные стили
│   │   ├── roskomnadzor.css  # Стили для Роскомнадзора
│   │   └── russian.css       # Российские стили
│   ├── js/
│   │   ├── main.js           # Основные скрипты
│   │   ├── roskomnadzor.js   # Скрипты Роскомнадзора
│   │   ├── slider.js         # Слайдер
│   │   └── weather-widget.js # Виджет погоды
│   └── images/               # Стандартные изображения
├── inc/
│   ├── customizer.php        # Кастомайзер
│   ├── Newscore_Walker_Nav_Menu.php # Навигация
│   ├── roskomnadzor.php      # Функции Роскомнадзора
│   ├── russian-seo.php       # SEO оптимизация
│   └── russian-social.php    # Социальные сети
├── template-parts/
│   ├── blocks/
│   │   ├── news-grid.php     # Блок сетки новостей
│   │   └── news-slider.php   # Блок слайдера
│   ├── content.php           # Шаблон поста
│   ├── content-none.php      # Пустой контент
│   ├── content-video.php     # Видео пост
│   └── content-legal.php     # Юридическая страница
├── languages/                # Переводы
└── *.php                    # Основные файлы шаблонов
```

11.2 Фильтры и действия:

Фильтры:

```php
// NewsGrid
newscore_categories_count
newscore_posts_per_category
newscore_exclude_categories

// NewsSlider
newscore_slider_args
newscore_slider_autoplay_speed

// Общие
newscore_reading_time_words_per_minute (default: 200)
newscore_post_thumbnail_sizes
newscore_social_networks
```

Действия:

```php
// Хуки для контента
newscore_before_post_content
newscore_after_post_content
newscore_before_post_meta
newscore_after_post_meta

// Хуки для футера
newscore_footer_before_widgets
newscore_footer_after_widgets
newscore_footer_before_copyright

// AJAX действия
wp_ajax_load_more_posts
wp_ajax_record_consent
wp_ajax_export_personal_data
```

11.3 Кастомные функции:

```php
// Вспомогательные функции
newscore_reading_time()              // Время чтения
newscore_format_number($number)      // Форматирование чисел
newscore_breadcrumbs()               // Хлебные крошки
newscore_pagination()                // Пагинация

// Функции безопасности
newscore_sanitize_search_query()     // Валидация поиска
newscore_record_consent_safe()       // Безопасное сохранение согласия
newscore_gdpr_data_export_secure()   // Экспорт данных

// Функции отображения
newscore_post_category_badge()       // Бейдж категории
newscore_russian_share_buttons()     // Кнопки "Поделиться"
newscore_cookie_notice()             // Cookie уведомление
```

11.4 Создание дочерней темы:

```php
/*
Theme Name: NewsCore Child
Theme URI: https://example.com/
Template: newscore
Version: 1.0.0
*/

// Подключение родительских стилей
add_action('wp_enqueue_scripts', function() {
    wp_enqueue_style('parent-style', 
        get_template_directory_uri() . '/style.css');
});
```

---

12. Устранение неполадок

12.1 Общие проблемы:

Слайдер не работает:

1. Проверьте наличие изображений у постов
2. Убедитесь, что посты опубликованы
3. Проверьте настройки типа слайдера
4. Очистите кэш браузера и WordPress

NewsGrid не показывает категории:

1. Убедитесь, что категории существуют и имеют посты
2. Проверьте настройки исключения категорий
3. Проверьте права на чтение категорий

Cookie уведомление не появляется:

1. Проверьте настройку в кастомайзере
2. Очистите cookies браузера
3. Проверьте консоль на ошибки JavaScript

12.2 Производительность:

Медленная загрузка:

1. Включите кэширование
2. Оптимизируйте изображения
3. Минимизируйте количество плагинов
4. Используйте CDN для статических файлов

Ошибки JavaScript:

1. Проверьте консоль разработчика
2. Убедитесь, что jQuery загружен
3. Проверьте конфликты с другими скриптами
4. Очистите кэш браузера

12.3 Вопросы совместимости:

С плагинами:

Рекомендуемые:

· Yoast SEO / Rank Math
· WP Rocket / W3 Total Cache
· Contact Form 7
· ACF (Advanced Custom Fields)

Потенциальные конфликты:

· Другие слайдеры
· SEO плагины, изменяющие заголовки
· Плагины безопасности с агрессивными настройками

12.4 Поддержка:

Логирование ошибок:

```php
// Включить отладку
define('WP_DEBUG', true);
define('WP_DEBUG_LOG', true);
define('WP_DEBUG_DISPLAY', false);

// Проверить логи
tail -f wp-content/debug.log
```

Контакты для поддержки:

· Документация: нет
· Баг-трекер: нет
· Форум поддержки: нет

---

Заключение

Тема NewsCore предоставляет полный набор инструментов для создания профессионального новостного портала с учетом российских требований. Регулярно обновляйте тему для получения новых функций и исправлений безопасности.

Рекомендации:

1. Регулярно делайте резервные копии
2. Тестируйте изменения на staging-окружении
3. Следите за обновлениями темы
4. Используйте дочернюю тему для кастомизации

Важные напоминания:

· Все настройки Роскомнадзора обязательны для российских сайтов
· Регулярно проверяйте актуальность юридической информации
· Мониторьте производительность сайта
· Обеспечьте доступность контента для людей с ограниченными возможностями

Для дополнительной помощи обращайтесь к документации WordPress и официальным ресурсам темы.